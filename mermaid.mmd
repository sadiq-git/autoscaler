flowchart TB

subgraph Clients
  A["Users and Load Generator"]
end

subgraph Edge
  LB["nginx LB"]
end

subgraph Control
  MON["Monitor"]
  REDIS["Redis PubSub"]
  PLN["Planner - Gemini"]
  EXEC["Executor"]
  WATCH["Watcher"]
  SUB["Subscriber"]
  DASH["Dashboard"]
  LLM["Gemini LLM API"]
end

subgraph AppPool
  direction LR
  APP1["app"]
  APPN["app duplicated"]
end

A --> LB
LB --> APP1
LB --> APPN

MON --> LB
MON --> REDIS

PLN --> REDIS
PLN --> LLM
PLN --> REDIS

EXEC --> REDIS
EXEC --> AppPool

WATCH --> AppPool
WATCH --> LB

SUB --> REDIS
DASH --> REDIS
